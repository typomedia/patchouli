{{ template "header" . }}
<table id="sort">
    <thead>
    <tr>
        <th>Status</th>
        <th>Updated</th>
        <th>Name</th>
        <th>System</th>
        <th>Address</th>
        <th>Domain</th>
        <th>Operator</th>
        <th>Updater</th>
        <th>History</th>
    </tr>
    </thead>
    <tbody>
    {{range .Machines}}
    <tr>
        {{ if .Inactive }}
            <td> inactive ( {{ .Days }} ) </td>
        {{ else }}
            <td class="{{ .Status }}"> {{ .Days }} </td>
        {{ end }}
        <td>{{ .Update.Date }}</td>
        <td>{{ .Name }}</td>
        <td>
            {{ if .System.IsEOL }}
            <em
                    data-tooltip="{{ .System.Name}} has reached EOL on {{ .System.EOL }}">
                <i class="ri-error-warning-line color-danger"></i>
            </em>
            {{ else }}
            <i class="ri-checkbox-circle-line color-success"></i>
            {{ end }}
            {{ .System.Name }}
        </td>
        <td>{{ .Ip }}</td>
        <td>
            {{ if .InternetAccess }}
            <em
                    data-tooltip="{{ .Name }} is accessible from the web">
                <i class="ri-global-line has-access"></i>
            </em>

            {{ else }}
            <i class="ri-global-line"></i>
            {{ end }}

            {{ .Fqdn }}
        </td>
        {{ if .Operator.Email }}
            <td><i class="ri-menu-search-line"></i> <a href="/filter/operator/{{ .Operator.Id}}">{{ .Operator.Name }}</a></td>
        {{ else }}
            <td>{{ .Operator.Name }}</td>
        {{ end }}
        {{ if .Update.Operator.Name }}
            {{ if .Operator.Email }}
                <td><i class="ri-mail-line"></i> <a href="mailto:{{ .Update.Operator.Email }}">{{ .Update.Operator.Name }}</a></td>
            {{ else }}
                <td>{{ .Update.Operator.Name }}</td>
            {{ end }}
        {{ else }}
            <td></td>
        {{ end }}
        <td><i class="ri-refresh-line"></i> <a href="/machine/update/list/{{ .Id }}">Update</a></td>
    </tr>
    {{end}}
    </tbody>
</table>
<script>
    new Tablesort(document.getElementById('sort'));
</script>
{{ template "footer" . }}
